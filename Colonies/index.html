<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jerry's Colonies Wiki</title>
  <link rel="icon" href="pack_icon.png" type="image/png">
  <link rel="shortcut icon" href="pack_icon.png" type="image/png">
  <style>
    @font-face {
      font-family: 'Minecraftia';
      src: url('../assets/fonts/MinecraftRegular-Bmg3.otf') format('opentype');
      font-weight: normal;
      font-style: normal;
      font-display: swap;
    }
    :root { --topbar-h: 48px; }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Minecraftia', monospace;
      background-color: #222;
      color: #fff;
    }

    body, h1, h2, h3, h4, h5, p, a, .nav-link {
      font-weight: normal;
      font-synthesis: none;
    }

    p, .lead {
      font-weight: 10; 
      color: #dfe6e5;   
      -webkit-font-smoothing: antialiased;
      text-shadow: none;
      letter-spacing: 0.25px;
    }

    .topbar {
      position: fixed;
      top: 0; left: 0; right: 0;
      height: var(--topbar-h);
      background: #0d3b2e;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 10px;
      z-index: 10;
      border-bottom: 2px solid #153f35;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .brand .badge {
      width: 44px; height: 44px; 
      display: grid; place-items: center;
      background: transparent; 
      border: none; 
      border-radius: 8px;
    }
    .brand .badge img { width: 30px; height: 30px; }
  .brand span { font-size: 18px; font-weight: normal; font-synthesis: none; }

    .actions { display: flex; align-items: center; gap: 8px; }
    .icon-btn {
      width: 34px; height: 34px;
      display: grid; place-items: center;
      background: #0b2c24;
      border: 2px solid #0a4a3b;
      border-radius: 6px;
      cursor: pointer;
    }
    .icon-btn img { width: 20px; height: 20px; display: block; }

  .hamburger { display: none; border: none; background: transparent; padding: 0; }
  .hamburger .bars { display: grid; gap:4px; }
  .hamburger .bars span { display:block; width:18px; height:2px; background:#58bfa7; border-radius:2px; }

  .app { display: flex; margin-top: var(--topbar-h); align-items: stretch; }

    .sidebar {
      width: 240px;
      background-color: #0d3b2e;

      min-height: calc(100vh - var(--topbar-h));
      overflow-y: auto;
      border-right: 2px solid #153f35;
    }
    .nav-link {
      padding: 14px 16px;
      text-decoration: none;
      color: #fff;
      display: block;
      border-bottom: 1px solid #1e5b4f;
      transition: background 0.15s ease;
    }
    .nav-link:hover { background-color: #146652; }
    .nav-link.active { background: #136250; box-shadow: inset 3px 0 0 #58bfa7; }

  .anchor { display: block; position: relative; top: calc(-1 * var(--topbar-h)); visibility: hidden; }

  .content { flex: 1; padding: 24px; }
  .page { display: none; }
  .page.active { display: block; }

    .content a {
      color: #58bfa7;
      text-decoration: none;
      border-bottom: 1px dashed rgba(88,191,167,0.25);
    }
    .content a:hover {
      color: #9ff3e7;
      border-bottom-color: rgba(159,243,231,0.45);
    }

  #mayors-table .mayors-abilities { margin-top:12px; padding-left:20px; }
  #mayors-table .mayors-abilities li { margin-bottom:14px; line-height:1.5; }

  #mayors-table .mayors-abilities h2 { display:inline; font-size:18px; margin:0 6px 0 0; font-weight:normal; }

  #mayors-table .mayors-abilities .paren { color: #58bfa7; }
  .content h1 { font-size: 40px; margin: 0 0 8px; font-weight: normal; font-synthesis: none; }
    .content p.lead { font-size: 18px; color: #cfd6d4; margin: 0 0 16px; }

    .image-placeholder {
      width: min(540px, 90%);
      height: 240px;
      border: 2px solid #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #000;
      font-size: 48px;
      letter-spacing: 2px;
    }

    @media (max-width: 880px) {
      .sidebar { width: 200px; }
      .brand span { font-size: 16px; }

  .hamburger { display: grid; position: fixed; right: 12px; top: calc(var(--topbar-h) + 8px); align-items:center; justify-items:center; width:40px; height:40px; background:#0b2c24; border:2px solid #0a4a3b; border-radius:8px; cursor:pointer; z-index:40;
    opacity: 0.92; 
    transition: opacity .18s ease, transform .18s ease; }
  .hamburger.hidden { opacity: 0; transform: scale(.94); pointer-events: none; }
      .sidebar { position: fixed; left: 0; top: var(--topbar-h); height: calc(100vh - var(--topbar-h)); transform: translateX(-100%); transition: transform .22s ease; z-index: 30; }
      .sidebar.open { transform: translateX(0); }

      .overlay { display: none; position: fixed; inset: var(--topbar-h) 0 0 0; background: rgba(0,0,0,0.45); z-index: 25; }
      .overlay.show { display:block; }

      .content { padding: 16px; }
    }

    
    .upload-section {
      background: #1a1a1a;
      border: 2px solid #153f35;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
    }

    .file-upload {
      margin-bottom: 20px;
    }

    .upload-btn, .generate-btn {
      background: #0d3b2e;
      border: 2px solid #153f35;
      color: #fff;
      padding: 12px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-family: 'Minecraftia', monospace;
      font-size: 14px;
      transition: all 0.2s;
    }

    .upload-btn:hover, .generate-btn:hover:not(:disabled) {
      background: #136250;
      border-color: #58bfa7;
    }

   
    .download-section {
      background: #1a1a1a;
      border: 2px solid #153f35;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
      text-align: center;
    }

    .download-btn {
      display: inline-block;
      background: #0d3b2e;
      border: 2px solid #153f35;
      color: #fff;
      padding: 15px 25px;
      border-radius: 6px;
      text-decoration: none;
      font-family: 'Minecraftia', monospace;
      font-size: 16px;
      font-weight: bold;
      transition: all 0.2s;
      margin-bottom: 10px;
    }

    .download-btn:hover {
      background: #136250;
      border-color: #58bfa7;
      text-decoration: none;
      color: #fff;
    }

    .download-info {
      color: #aaa;
      font-size: 12px;
      margin: 10px 0 0 0;
      font-style: italic;
    }

    .generate-btn:disabled {
      background: #2a2a2a;
      border-color: #444;
      color: #666;
      cursor: not-allowed;
    }

    .file-count {
      margin-top: 10px;
      color: #58bfa7;
      font-size: 14px;
    }

    .structure-list {
      margin-top: 15px;
    }

    .structure-item {
      background: #2a2a2a;
      border: 2px solid #444;
      border-radius: 6px;
      padding: 15px;
      margin-bottom: 15px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .structure-file-info {
      display: flex;
      align-items: center;
      gap: 10px;
      color: #58bfa7;
      font-size: 14px;
    }

    .structure-file-info .file-icon {
      font-size: 18px;
    }

    .structure-name-input {
      background: #1a1a1a;
      border: 2px solid #153f35;
      color: #fff;
      padding: 8px 12px;
      border-radius: 4px;
      font-family: 'Minecraftia', monospace;
      font-size: 12px;
      width: 100%;
    }

    .structure-name-input:focus {
      border-color: #58bfa7;
      outline: none;
    }

    .structure-name-label {
      color: #dfe6e5;
      font-size: 12px;
      margin-bottom: 5px;
    }

    .remove-structure {
      background: #dc3545;
      border: 2px solid #c82333;
      color: white;
      padding: 6px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-family: 'Minecraftia', monospace;
      font-size: 11px;
      align-self: flex-end;
      transition: all 0.2s;
    }

    .remove-structure:hover {
      background: #c82333;
      border-color: #bd2130;
    }

    .pack-details {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin: 20px 0;
    }

    .pack-details label {
      color: #dfe6e5;
      font-size: 14px;
      margin-bottom: 5px;
    }

    .pack-details input, .pack-details textarea {
      background: #2a2a2a;
      border: 2px solid #444;
      color: #fff;
      padding: 10px;
      border-radius: 4px;
      font-family: 'Minecraftia', monospace;
      font-size: 12px;
    }

    .pack-details input:focus, .pack-details textarea:focus {
      border-color: #58bfa7;
      outline: none;
    }

    .download-section {
      background: #0a2f23;
      border: 2px solid #58bfa7;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
    }

    .download-section h3 {
      color: #58bfa7;
      margin-top: 0;
    }

    .download-buttons {
      display: flex;
      gap: 15px;
      margin: 15px 0;
      flex-wrap: wrap;
    }

    .download-btn {
      background: #0d5847;
      color: #ffffff;
      padding: 12px 20px;
      border-radius: 6px;
      text-decoration: none;
      font-family: 'Minecraftia', monospace;
      font-size: 14px;
      font-weight: bold;
      transition: all 0.2s;
      display: inline-block;
    }

    .download-btn:hover {
      background: #15ac95;
      transform: translateY(-2px);
    }

    .download-btn.behavior {
      background: #4CAF50;
    }

    .download-btn.resource {
      background: #FF9800;
    }

    .download-btn.mcaddon {
      background: #9C27B0;
      font-size: 16px;
      padding: 15px 30px;
    }

    .success-notice {
      background: #0a2f23;
      border: 2px solid #4CAF50;
      border-radius: 6px;
      padding: 15px;
      margin-top: 15px;
    }

    .success-notice h4 {
      color: #4CAF50;
      margin-top: 0;
    }

    .included-files {
      background: #1a1a1a;
      border: 1px solid #4CAF50;
      border-radius: 4px;
      padding: 10px;
      margin: 10px 0;
    }

    .structure-file-item {
      background: #1a1a1a;
      border: 1px solid #444;
      border-radius: 4px;
      padding: 8px 12px;
      margin: 5px 0;
      font-family: 'Minecraftia', monospace;
      font-size: 11px;
    }

    .instructions {
      margin-top: 20px;
      padding-top: 15px;
      border-top: 1px solid #58bfa7;
    }

    .instructions code {
      background: #2a2a2a;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Minecraftia', monospace;
      font-size: 11px;
    }

    @media (max-width: 600px) {
      .download-buttons {
        flex-direction: column;
      }
      
      .download-btn {
        text-align: center;
      }
    }
  </style>
</head>
<body>
  
  <div class="topbar">
    <div class="brand">
      <div class="badge">
        <img src="pack_icon.png" alt="Logo" />
      </div>
      <span>Jerry's Colonies Wiki</span>
    </div>

    <div class="actions">
      <a class="icon-btn" href="https://www.curseforge.com/minecraft-bedrock/addons/jerrys-colonies" title="CurseForge" target="_blank" rel="noopener noreferrer">
        <img src="https://cdn.discordapp.com/emojis/1352882181009051709.webp?size=44" alt="CurseForge" />
      </a>
      <a class="icon-btn" href="https://discord.gg/P3ahdUzgMH" title="Discord" target="_blank" rel="noopener noreferrer">
        <img src="https://cdn.discordapp.com/emojis/1402753921302270073.webp?size=44" alt="Discord" />
      </a>
      <a class="icon-btn" href="https://www.youtube.com/@Jerryeatsbeans/featured" title="YouTube" target="_blank" rel="noopener noreferrer">
        <img src="https://cdn.discordapp.com/emojis/1408096800568774798.webp?size=44" alt="YouTube" />
      </a>
    </div>
  </div>

  <!-- Hamburger button fixed under the navbar for small screens -->
  <button class="hamburger" aria-label="Toggle menu" aria-expanded="false" aria-controls="sidebar">
    <div class="bars" aria-hidden="true">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </button>

  <div class="app">
    <nav class="sidebar">
      <a class="nav-link active" href="#get-started">Get Started</a>
      <a class="nav-link" href="#mayors-table">Mayor's Table</a>
      <a class="nav-link" href="#feeding">Feeding Citizens</a>
      <a class="nav-link" href="#citizens">Citizens</a>
      <a class="nav-link" href="#plagues">Plagues</a>
      <a class="nav-link" href="#marauders">Marauders</a>
      <a class="nav-link" href="#construction">Blueprints</a>
      <a class="nav-link" href="#war">War & Diplomacy</a>
      <a class="nav-link" href="#moderation">Mod Tool</a>
      <a class="nav-link" href="#custom-builder">Custom Structure Builder</a>
    </nav>

    <main class="content">
      <div id="get-started" class="page active">
        <span class="anchor"></span>
        <h1>Getting Started in Jerry's Colonies</h1>
        <p class="lead">Jerry's Colonies is a multiplayer-oriented addon for Minecraft: Bedrock Edition that adds player-managed colonies to the game. The goal is to turn Minecraft into a civilization simulator where players can manage/build cities, create lore, and simulate diplomacy.</p>

        <h2>The First Step:</h2>
        <p>You are well on your way to growing a powerful civilization, but first you need to set up the basics. Craft a flag using 6 wool and a stick. This is what will create your colony.</p>
  <p><img src="assets/1.png" alt="Flag crafting recipe" style="max-width:100%;border:2px solid #153f35;border-radius:6px;" /></p>

        <p>Now you can place your flag! To do this, build a flag pole out of any vanilla fence and right click (mobile users: hold) to place the flag on the fence. If it doesn't work, your flag pole isn't tall enough, you are too far away, or you are not looking at the fence.</p>
        <h2><strong>[WARNING]</strong> Many people struggle to place the flag and get an error saying they can't; if this happens to you you're likely just not tapping the right area on your screen ‚Äî stand directly in front of the flagpole and try again.</h2>
  <p><img src="assets/2.png" alt="Placing a flag on a pole" style="max-width:100%;border:2px solid #153f35;border-radius:6px;" /></p>

        <p>After placing the flag you should be given a crown named after your colony. This crown is unique and cannot be replaced ‚Äî take good care of it.</p>

  <h2>Read Next: <a href="#mayors-table">The Mayor's Table</a></h2>
      </div>

      <div id="mayors-table" class="page">
        <span class="anchor"></span>
        <h1>Mayor's Table</h1>
  <p><strong>The Mayor's Table is the central workstation for your colony. Use a crafting table to make the Mayor's Table, the recipe is shown below.</p>
  <p><img src="assets/5.png" alt="Mayor's Table crafting recipe" style="max-width:320px;border:2px solid #153f35;border-radius:6px;display:block;margin:8px 0;" /></p>

  <p>The Mayor's Table has the following abilities</p>

  <ul class="mayors-abilities">
         <li><h2>View Colony Info</h2> ‚Äî Sends a chat message containing info about your colony. Only you can see this.</li>
         <li><h2>Change Flag Color</h2> ‚Äî Customize the flag color, and the color of your colonies display name</li>
         <li><h2>Manage Members</h2> ‚Äî Invite players, Purchase Citizens, and Manage Population.</li>
         <li><h2>Construction</h2> ‚Äî Browse and buy prebuilt structure blueprints.</li>
         <li><h2>Diplomacy</h2> ‚Äî Set relationships with other colonies <span class="paren">(ally/neutral/hostile)</span>, or declare war on your enemies.</li>
         <li><h2>Rename / Delete Colony</h2> ‚Äî Change your colony's display name, or permanently delete a colony.</li>
         <li><h2>Transfer Ownership</h2> ‚Äî Pass the crown to another player, transfers full ownership and administrative rights to them.</li>
         <li><h2>Teleport Between Flags</h2> ‚Äî Fast-travel to any of your colony's flags <span class="paren">(Only appears if your colony has multiple flags)</span></li>
       </ul>

       <div class="mayors-contents" style="display:flex;gap:12px;flex-wrap:wrap;margin-top:12px;">
         <img src="assets/3.png" alt="Mayor's Table contents - left" style="max-width:48%;border:2px solid #153f35;border-radius:6px;" />
         <img src="assets/4.png" alt="Mayor's Table contents - right" style="max-width:48%;border:2px solid #153f35;border-radius:6px;" />
       </div>

  <h2>Read Next: <a href="#feeding">Feeding Citizens</a></h2>
      </div>

      <div id="feeding" class="page">
        <span class="anchor"></span>
        <h1>Feeding Citizens</h1>
        <p class="lead">It's important to learn how to feed your citizens before inviting citizens to your colony. Citizens need food to stay alive and productive. If a colony runs out of accessible food, citizens can become hungry and will eventually die.</p>

        <h2>Crafting / Setup</h2>
        <p>Craft a Food Crate by combining a chest with two bread and some planks at a crafting table ‚Äî place the crate inside the colony territory so citizens can access it.</p>
         <p><img src="assets/6.png" alt="Food Crate crafting recipe" style="max-width:320px;border:2px solid #153f35;border-radius:6px;display:block;margin:8px 0;" /></p>

        <h2>How it works</h2>
        <p>Citizens will automatically take one food item from any accessible Food Crate per in-game day. The crate must be within the colony's protected radius.</p>
         <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:8px;">
           <img src="assets/7.png" alt="Food crate example 1" style="max-width:48%;border:2px solid #153f35;border-radius:6px;" />
           <img src="assets/8.png" alt="Food crate example 2" style="max-width:48%;border:2px solid #153f35;border-radius:6px;" />
         </div>

        <h2>Read Next: <a href="#citizens">Citizens</a></h2>
      </div>

      <div id="citizens" class="page">
        <span class="anchor"></span>
        <h1>Citizens</h1>
        <p class="lead">Citizens are the heart of a colony. There are two kinds:</p>

        <p><h3>Players</h3> ‚Äî Invite other players through the Mayor's Table to join your colony.
        <br /><h3>NPCs</h3> ‚Äî Hireable citizens purchased from the Mayor's Table. Cost shown in the Mayors Table (<span class="paren">Default 5 Emeralds Each</span>), and they can be equipped with armor by dropping it at their feet and assigned jobs.</p>
        <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px;">
          <img src="assets/9.png" alt="NPC example 1" style="max-width:32%;border:2px solid #153f35;border-radius:6px;" />
          <img src="assets/10.png" alt="NPC example 2" style="max-width:32%;border:2px solid #153f35;border-radius:6px;" />
          <img src="assets/11.png" alt="NPC example 3" style="max-width:32%;border:2px solid #153f35;border-radius:6px;" />
        </div>

        <h3>Feeding</h3>
        <p>Civilians require food to survive ‚Äî see <a href="#feeding">Feeding Citizens</a> for more info. Check a citizens hunger by interacting with them.</p>

        <h3>Knights</h3>
        <p>Knights are a special citizen job. They are stronger, and can be ordered to follow and assist you in combat.</p>
        <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px;">
          <img src="assets/12.png" alt="Knight example 1" style="max-width:48%;border:2px solid #153f35;border-radius:6px;" />
          <img src="assets/13.png" alt="Knight example 2" style="max-width:48%;border:2px solid #153f35;border-radius:6px;" />
        </div>

        <h3>Benefits & Mechanics</h3>
        <ul style="margin-top:8px;padding-left:20px;">
          <li>Colony Buffs: Every 10 citizens unlocks a status effect for colony members within colony territory (up to 50 citizens worth of effects).</li>
          <li>Jobs: Assign jobs (botanist, miner, hunter, etc.). Citizens occasionally give items related to their job; a yellow exclamation mark appears above them when they have items to collect.</li>
          <li>Population Limits: Server admins can set NPC caps via the moderation tool, and adjust the price; be mindful of performance and balance when hiring many NPCs.</li>
        </ul>
        <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px;">
          <img src="assets/14.png" alt="Benefits example 1" style="max-width:48%;border:2px solid #153f35;border-radius:6px;" />
          <img src="assets/15.png" alt="Benefits example 2" style="max-width:48%;border:2px solid #153f35;border-radius:6px;" />
        </div>

        <h2>Read Next: <a href="#plagues">Plagues</a></h2>
      </div>

      <div id="war" class="page">
        <span class="anchor"></span>
        <h1>War & Diplomacy</h1>
        <p class="lead">Diplomacy is how colonies manage their relationships with one another ‚Äî set allies, neutrals, or hostiles and use the Mayor's Table relations menu to interact with other colonies.</p>

        <h2>Relations</h2>
        <p>Open the Relations menu at the Mayor's Table to view other colonies, set alliances, or mark another colony as hostile.
        <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:8px;">
          <img src="assets/27.png" alt="Relations menu with another colony" style="max-width:48%;border:2px solid #153f35;border-radius:6px;" />
        </div>

        <h2>Declaring War</h2>
        <p>To declare war, use the diplomacy menu and choose <em>Declare War</em> against a hostile colony (Colony must have 5 or more citizens). When a war is declared the target colony receives a notification and a war timer starts.</p>
        <p>Wars are timed and how long is chosen by the colony that declares. Score points in a war by eliminating opposing NPCs or player citizens. Victorious colonies may claim one of the other colonies flags (if they have more than one).</p>
        <img src="assets/26.png" alt="War declared notification" style="max-width:48%;border:2px solid #153f35;border-radius:6px;" />

          <li>Be aware of server rules ‚Äî some servers may impose their own rules for war.</li>
        </ul>
        <h2>Read Next: <a href="#moderation">Mod Tool</a></h2>
      </div>

      <div id="construction" class="page">
        <span class="anchor"></span>
        <h1>Blueprints & Construction</h1>
        <p class="lead">Blueprints let you instantly place complex structures so you can quickly expand your colony with nice buildings and layouts.</p>

        <h2>Purchase Menu</h2>
        <p>Open the Mayor's Table and browse the Construction menu to view available blueprints. Prices can be set by server admins.</p>
        <div style="margin-top:8px;">
          <img src="assets/21.png" alt="Blueprint purchase menu" style="max-width:100%;border:2px solid #153f35;border-radius:6px;" />
        </div>

        <h2>Placing a Blueprint</h2>
        <p>Select a blueprint, position the preview outline in the world, and confirm to instantly build. You have a short preview window to cancel the placement. If you don't like where it is, you have one more chance to undo it</p>
        <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px;">
          <img src="assets/22.png" alt="Blueprint preview 1" style="max-width:32%;border:2px solid #153f35;border-radius:6px;" />
          <img src="assets/23.png" alt="Blueprint preview 2" style="max-width:32%;border:2px solid #153f35;border-radius:6px;" />
          <img src="assets/24.png" alt="Blueprint preview 3" style="max-width:32%;border:2px solid #153f35;border-radius:6px;" />
        </div>

        <h2>Example:</h2>
        <p>Here's a city I built using several different blueprints.</p>
        <div style="margin-top:8px;">
          <img src="assets/25.png" alt="City created with blueprints" style="max-width:100%;border:2px solid #153f35;border-radius:6px;" />
        </div>

        <h2>Read Next: <a href="#war">War & Diplomacy</a></h2>
      </div>

      <div id="marauders" class="page">
        <span class="anchor"></span>
        <h1>Marauder Attacks</h1>
        <p class="lead">Marauders are very dangerous event like plagues where hostile NPCs (Marauders) arrive by hot-air balloon and assault your colony ‚Äî first from the air, then on the ground.</p>
        <div style="margin-top:8px;">
          <img src="assets/17.png" alt="Marauders arriving" style="max-width:100%;border:2px solid #153f35;border-radius:6px;" />
        </div>

        <h2>What are Marauders?</h2>
        <p>Marauders are hostile NPC raiders that spawn above colonies in small groups (commonly 3‚Äì5). They arrive in hot-air balloons and may target your colony for a raid that comes in multiple waves.</p>

        <h2>Waves</h2>
        <p>Waves typically happen in two phases:</p>
        <ul style="margin-top:8px;padding-left:20px;">
          <li><strong>Wave 1 ‚Äî Bombing:</strong> Marauders remain in their balloons and drop explosive bombs over the colony. Bombs damage entities but do not break blocks.
            <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px;">
              <img src="assets/18.png" alt="Bombing example" style="max-width:32%;border:2px solid #153f35;border-radius:6px;" />
              <img src="assets/19.png" alt="Balloon example" style="max-width:32%;border:2px solid #153f35;border-radius:6px;" />
              <img src="assets/20.png" alt="Bomb impact example" style="max-width:32%;border:2px solid #153f35;border-radius:6px;" />
            </div>
          </li>
          <li><strong>Wave 2 ‚Äî Ground Assault:</strong> After bombing, the marauders land and continue the attack on the ground, engaging players and NPC citizens directly.</li>
        </ul>

        <h2>Tips</h2>
        <ul style="margin-top:8px;padding-left:20px;">
          <li>Keep citizens sheltered inside protected structures during raids to reduce civilian casualties.</li>
          <li>Equip knights and guards with good armor and weapons ‚Äî they perform well defending against the ground wave.</li>
          <li>Use Iron Golems ‚Äî They deal heavy damage to Marauders, but Marauders deal heavy damage back.</li>
          <li>Admins can change the frequency via the moderation tool if raids are too often / too little.</li>
        </ul>

        <h2>Read Next: <a href="#construction">Blueprints</a></h2>
      </div>

      <div id="plagues" class="page">
        <span class="anchor"></span>
        <h1>Plagues</h1>
        <p>Plagues can infect a colony, applying Weakness III to citizens for 20 minutes. World admins can adjust how often plagues occur</p>
        <div style="margin-top:8px;">
          <img src="assets/16.png" alt="Plague example" style="max-width:100%;border:2px solid #153f35;border-radius:6px;" />
        </div>

  <h2>Read Next: <a href="#marauders">Marauders</a></h2>
      </div>

      <div id="moderation" class="page">
        <span class="anchor"></span>
        <h1>Server Moderation</h1>
        <p class="lead">Each colony protects a a 100 block radius around each of its flags. Non-members cannot break blocks inside this area unless admins configure otherwise. Server admins use the Moderation Tool (an admin-only item) to manage colonies and tweak addon settings.</p>

        <h2>The Mod Tool Item</h2>
        <p>The mod tool is an item given to server admins that opens a powerful administration UI. Use it to quickly manage colonies, adjust global settings, and troubleshoot issues. To open the UI, right click or hold on any colony flag.</p>
        <div style="margin-top:8px;">
          <img src="assets/28.png" alt="Moderation tool item" style="max-width:40%;border:2px solid #153f35;border-radius:6px;display:block;margin-bottom:8px;" />
        </div>

        <h2>Admin Features</h2>
        <p>KTo use the mod tool, grab it from the creative menu, and then give yourself access via the command "/tag add [username] admin"</p>
        <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:8px;">
          <div style="flex:1;min-width:220px;">
            <img src="assets/29.png" alt="Teleport / Delete colony" style="max-width:100%;border:2px solid #153f35;border-radius:6px;" />

          </div>
          <div style="flex:1;min-width:220px;">
            <img src="assets/30.png" alt="Toggle modules" style="max-width:100%;border:2px solid #153f35;border-radius:6px;" />

          </div>

          <div style="flex:1;min-width:220px;">
            <img src="assets/32.png" alt="Land protection settings" style="max-width:100%;border:2px solid #153f35;border-radius:6px;" />

          </div>
        </div>

        <ul style="margin-top:8px;padding-left:20px;">
          <li>Tweaking addon settings</li>
          <li>Setting prices for citizens/blueprints</li>
          <li>Triggering events</li>
          <li>Teleporting between colonies</li>
          <li>Setting citizen limits</li>
          <li>Force-Deleting Colonies</li>
          <li>More to come...</li>
        </ul>
        
        <h2>Read Next: <a href="#custom-builder">Custom Structure Builder</a></h2>
      </div>

      <div id="custom-builder" class="page">
        <span class="anchor"></span>
        <h1>Custom Structure Builder</h1>
        <p class="lead">Create your own expansion packs for Jerry's Colonies! Upload your .mcstructure files and generate a complete expansion pack that integrates seamlessly with the colony system.</p>

        <h2>Step 1: Download Jerry's Structure Editor World</h2>
        <p>To create properly sized structures (15√ó22√ó15), you <strong>must</strong> use Jerry's Structure Editor world. This is the only way to create structures that will work correctly with the colony system.</p>
        
        <div class="download-section">
          <a href="../assets/Jerry's Structure Editor.mcworld" download class="download-btn">
            ‚¨áÔ∏è Download Jerry's Structure Editor World
          </a>
          <p class="download-info">After downloading, double-click the .mcworld file to import it into Minecraft. Then create your 15√ó22√ó15 structures and export them as .mcstructure files.</p>
        </div>

        <h2>Step 2: Upload Your Structures</h2>
        <div class="upload-section">
          <div class="file-upload">
            <input type="file" id="structureFiles" accept=".mcstructure" multiple style="display: none;">
            <button onclick="document.getElementById('structureFiles').click()" class="upload-btn">
              üìÅ Select .mcstructure Files
            </button>
            <div class="file-info">
              <div id="fileCount" class="file-count"></div>
              <div id="structureList" class="structure-list"></div>
            </div>
          </div>
          
          <div class="pack-details">
            <label for="packName">Expansion Pack Name:</label>
            <input type="text" id="packName" placeholder="Jerry's Colonies" maxlength="50">
            
            <label for="description">Pack Description (Optional):</label>
            <textarea id="description" placeholder="Adds custom structures to Jerry's Colonies" rows="3" maxlength="200"></textarea>
          </div>

          <button id="generatePack" class="generate-btn" disabled>üöÄ Generate Expansion Pack</button>
        </div>

        <div id="downloadSection" class="download-section" style="display: none;">
          <h3>‚úÖ Expansion Pack Generated Successfully!</h3>
          <p>Your custom expansion pack is ready! Download the .mcaddon file and double-click to install:</p>
          <div class="download-buttons">
            <a id="downloadMcaddon" class="download-btn mcaddon">üéÅ Download .mcaddon File</a>
          </div>
          <div class="instructions">
            <h4>Installation Instructions:</h4>
            <ol>
              <li>Download the .mcaddon file above</li>
              <li>Double-click the .mcaddon file to automatically import both packs</li>
              <li>Open Minecraft and create/edit a world</li>
              <li>Enable both the behavior pack and resource pack in world settings. MAKE SURE THE EXPANSION PACK IS ABOVE JERRY'S COLONIES IN THE RP/BP MENU</li>
              <li>Your custom structures will appear in Jerry's Colonies construction menu!</li>
            </ol>
          </div>
        </div>
      </div>

      <div class="page">
        <p class="lead">That's the essentials ‚Äî use the Mayor's Table and flags to manage and grow your civilization, and join the Discord for suggestions or support.</p>
      </div>

      <!-- Hidden 404 page (not linked in the UI) -->
      <div id="404" class="page">
        <span class="anchor"></span>
        <h1>404 ‚Äî Page not found</h1>
        <p class="lead">This page does not exist. If you followed an external link that led here, try returning to the <a href="#get-started">Get Started</a> page.</p>
      </div>
    </main>
  </div>

  
  <div id="overlay" class="overlay" tabindex="-1" aria-hidden="true"></div>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  
  <script>

    const navLinks = document.querySelectorAll('.nav-link');
    const pages = document.querySelectorAll('.page');

    function showPage(id, pushHistory = true) {

      const match = Array.from(pages).find(p => p.id === id);
      const showId = match ? id : '404';
      pages.forEach(p => p.classList.toggle('active', p.id === showId));
      navLinks.forEach(a => a.classList.toggle('active', a.getAttribute('href') === '#' + showId));
      if (pushHistory) history.pushState(null, '', '#' + showId);
    }

    navLinks.forEach(link => {
      link.addEventListener('click', e => {
        e.preventDefault();
        const target = link.getAttribute('href').slice(1);
        showPage(target);
      });
    });

    window.addEventListener('popstate', () => {
      const id = location.hash.slice(1) || 'get-started';
      showPage(id, false);
    });

    const initial = location.hash.slice(1) || 'get-started';
    showPage(initial, false);

    const hamburger = document.querySelector('.hamburger');
    const sidebar = document.querySelector('.sidebar');
    const overlay = document.getElementById('overlay');

    function setSidebarOpen(open) {
      if (open) {
        sidebar.classList.add('open');
        overlay.classList.add('show');
        hamburger.setAttribute('aria-expanded', 'true');
    if (hamburger) hamburger.classList.add('hidden');
      } else {
        sidebar.classList.remove('open');
        overlay.classList.remove('show');
        hamburger.setAttribute('aria-expanded', 'false');
    if (hamburger) hamburger.classList.remove('hidden');
      }
    }

    if (hamburger) {
      hamburger.addEventListener('click', () => {
        const isOpen = sidebar.classList.contains('open');
        setSidebarOpen(!isOpen);
      });
    }

    if (overlay) overlay.addEventListener('click', () => setSidebarOpen(false));

    navLinks.forEach(link => link.addEventListener('click', () => setSidebarOpen(false)));

    // Custom Structure Builder Functionality
    const structureFiles = document.getElementById('structureFiles');
    const fileCount = document.getElementById('fileCount');
    const structureList = document.getElementById('structureList');
    const packName = document.getElementById('packName');
    const description = document.getElementById('description');
    const generateBtn = document.getElementById('generatePack');
    const downloadSection = document.getElementById('downloadSection');
    const downloadMcaddon = document.getElementById('downloadMcaddon');
    const structureFilesList = document.getElementById('structureFilesList');

    let selectedStructures = [];

    // File upload handler
    if (structureFiles) {
      structureFiles.addEventListener('change', (e) => {
        const files = Array.from(e.target.files);
        const validFiles = files.filter(file => file.name.endsWith('.mcstructure'));
        
        if (validFiles.length > 0) {
          // Add new files to selected structures
          validFiles.forEach(file => {
            const structureName = file.name.replace('.mcstructure', '').replace(/[^a-zA-Z0-9\s]/g, ' ').trim();
            selectedStructures.push({
              file: file,
              fileName: file.name,
              displayName: structureName,
              id: generateId()
            });
          });
          
          updateStructureList();
          checkGenerateButton();
        }
        
        if (files.length > validFiles.length) {
          alert('Some files were skipped because they are not .mcstructure files.');
        }
        
        // Reset input to allow re-selecting same files
        structureFiles.value = '';
      });
    }

    // Input validation
    if (packName) {
      packName.addEventListener('input', checkGenerateButton);
    }

    function updateStructureList() {
      if (!structureList || !fileCount) return;
      
      const count = selectedStructures.length;
      if (count === 0) {
        fileCount.textContent = '';
        structureList.innerHTML = '';
        return;
      }
      
      fileCount.textContent = `üìÑ ${count} structure${count === 1 ? '' : 's'} selected`;
      fileCount.style.color = '#58bfa7';
      
      structureList.innerHTML = selectedStructures.map(structure => `
        <div class="structure-item" data-id="${structure.id}">
          <div class="structure-file-info">
            <span class="file-icon">üì¶</span>
            <span>${structure.fileName}</span>
          </div>
          <div>
            <div class="structure-name-label">Structure Display Name:</div>
            <input 
              type="text" 
              class="structure-name-input" 
              value="${structure.displayName}"
              placeholder="Enter display name"
              maxlength="30"
              data-id="${structure.id}"
            >
          </div>
          <button class="remove-structure" onclick="removeStructure('${structure.id}')">
            üóëÔ∏è Remove
          </button>
        </div>
      `).join('');
      
      
      document.querySelectorAll('.structure-name-input').forEach(input => {
        input.addEventListener('input', (e) => {
          const structureId = e.target.getAttribute('data-id');
          const structure = selectedStructures.find(s => s.id === structureId);
          if (structure) {
            structure.displayName = e.target.value;
            checkGenerateButton();
          }
        });
      });
    }

    function removeStructure(id) {
      selectedStructures = selectedStructures.filter(s => s.id !== id);
      updateStructureList();
      checkGenerateButton();
    }

   
    window.removeStructure = removeStructure;

    function checkGenerateButton() {
      const hasFiles = selectedStructures.length > 0;
      const hasPackName = packName?.value.trim();
      const allStructuresNamed = selectedStructures.every(s => s.displayName.trim());
      
      const isValid = hasFiles && hasPackName && allStructuresNamed;
      
      if (generateBtn) {
        generateBtn.disabled = !isValid;
      }
    }

    function generateId() {
      return Math.random().toString(36).substr(2, 9);
    }

    
    async function fetchAssetAsBase64(assetPath) {
      try {
        const response = await fetch(assetPath);
        const blob = await response.blob();
        
        return new Promise((resolve, reject) => {
          const reader = new FileReader();
          reader.onload = () => {
            resolve(reader.result.split(',')[1]); 
          };
          reader.onerror = reject;
          reader.readAsDataURL(blob);
        });
      } catch (error) {
        console.error(`Failed to fetch asset: ${assetPath}`, error);
        throw error;
      }
    }

    // Generate expansion pack
    if (generateBtn) {
      generateBtn.addEventListener('click', async () => {
        if (selectedStructures.length === 0 || !packName.value.trim()) {
          alert('Please select structure files and enter a pack name.');
          return;
        }

        const unnamedStructures = selectedStructures.filter(s => !s.displayName.trim());
        if (unnamedStructures.length > 0) {
          alert('Please provide display names for all structures.');
          return;
        }

        try {
          generateBtn.textContent = 'üîÑ Generating...';
          generateBtn.disabled = true;

         
          const behaviorUuid = generateUUID();
          const behaviorDataUuid = generateUUID();
          const behaviorScriptUuid = generateUUID();

         
          const mcaddonBlob = await createMcaddonPack(
            packName.value.trim(),
            description.value.trim(),
            selectedStructures,
            behaviorUuid,
            behaviorDataUuid,
            behaviorScriptUuid
          );

          
          downloadMcaddon.href = URL.createObjectURL(mcaddonBlob);
          downloadMcaddon.download = `${packName.value.trim().replace(/[^a-zA-Z0-9\s]/g, '').replace(/\s+/g, '_')}.mcaddon`;

          
          displayIncludedFiles(selectedStructures);

          downloadSection.style.display = 'block';
          generateBtn.textContent = '‚úÖ Pack Generated!';

        } catch (error) {
          console.error('Error generating pack:', error);
          alert('Error generating pack. Please try again.');
          generateBtn.textContent = 'üöÄ Generate Expansion Pack';
          generateBtn.disabled = false;
        }
      });
    }

    function generateUUID() {
      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
        const r = Math.random() * 16 | 0;
        const v = c == 'x' ? r : (r & 0x3 | 0x8);
        return v.toString(16);
      });
    }

    async function createMcaddonPack(packName, desc, structures, behaviorUuid, dataUuid, scriptUuid) {
      const zip = new JSZip();
      
      // Clean pack name for folder
      const cleanPackName = packName.toLowerCase().replace(/[^a-z0-9\s]/g, '').replace(/\s+/g, '_');
      
      // Create behavior pack folder
      const bpFolder = zip.folder(`${cleanPackName}_BP`);
      
      // Create behavior pack manifest
      const bpManifest = {
        format_version: 2,
        header: {
          description: desc || `${packName} - Expansion pack for Jerry's Colonies`,
          name: packName,
          uuid: behaviorUuid,
          version: [1, 0, 0],
          min_engine_version: [1, 20, 10]
        },
        modules: [
          {
            description: `${packName} Data`,
            type: "data",
            uuid: dataUuid,
            version: [1, 0, 0]
          },
          {
            description: `${packName} Scripts`,
            type: "script",
            language: "javascript",
            uuid: scriptUuid,
            version: [1, 0, 0],
            entry: "scripts/main.js"
          }
        ],
        dependencies: [
          {
            module_name: "@minecraft/server",
            version: "1.15.0"
          }
        ],
        metadata: {
          product_type: "addon"
        }
      };
      
      bpFolder.file("manifest.json", JSON.stringify(bpManifest, null, 2));
      
      // Add pack icon for behavior pack (use provided asset)
      const bpIconData = await fetchAssetAsBase64('assets/pack_icon.png');
      bpFolder.file("pack_icon.png", bpIconData, {base64: true});
      
      // Create blueprint definitions for all structures
      const blueprintDefinitions = structures.map(structure => {
        const structureFileName = structure.fileName.replace('.mcstructure', '');
        const blueprintId = `jerrys_colonies:blueprint_${structureFileName.toLowerCase().replace(/[^a-z0-9_]/g, '_')}`;
        
        return `    {
        typeId: "${blueprintId}",
        displayName: "${structure.displayName}", 
        structure: "${structureFileName}",
        size: { width: 15, height: 22, depth: 15 },
        frontSide: "max_z"
    }`;
      }).join(',\n');
      
      // Create main.js script
      const mainScript = `/*
 * ${packName} for Jerry's Colonies
 * Generated by Custom Structure Builder
 * Contains ${structures.length} custom structure${structures.length === 1 ? '' : 's'}
 */

import { world, system } from "@minecraft/server";

const PACK_NAME = "${packName}";

// Define blueprints for all structures
const customBlueprints = [
${blueprintDefinitions}
];

// Register the expansion pack when the world starts
system.runTimeout(() => {
    console.log(\`Registering expansion pack: \${PACK_NAME} with \${customBlueprints.length} structure\${customBlueprints.length === 1 ? '' : 's'}\`);
    
    // Register each blueprint
    customBlueprints.forEach(blueprint => {
        system.run(() => {
            const registrationData = {
                packName: PACK_NAME,
                blueprint: blueprint
            };
            
            world.getDimension("overworld").runCommand(
                \`scriptevent jerrys_colonies:register_expansion \${JSON.stringify(registrationData)}\`
            );
            
            console.log(\`Registered blueprint: \${blueprint.displayName}\`);
        });
    });
}, 20);

console.log(\`\${PACK_NAME} loaded successfully!\`);`;

      const scriptsFolder = bpFolder.folder("scripts");
      scriptsFolder.file("main.js", mainScript);
      
      // Create item definitions
      const itemsFolder = bpFolder.folder("items");
      structures.forEach(structure => {
        const structureFileName = structure.fileName.replace('.mcstructure', '');
        const blueprintId = `jerrys_colonies:blueprint_${structureFileName.toLowerCase().replace(/[^a-z0-9_]/g, '_')}`;
        const itemFileName = `${blueprintId.replace('jerrys_colonies:', '')}.json`;
        
        const blueprintItem = {
          format_version: "1.20.60",
          "minecraft:item": {
            description: {
              identifier: blueprintId,
              menu_category: {
                category: "items"
              }
            },
            components: {
              "minecraft:display_name": {
                value: `${structure.displayName} Blueprint`
              },
              "minecraft:icon": blueprintId.replace('jerrys_colonies:', ''),
              "minecraft:max_stack_size": 64,
              "minecraft:hand_equipped": true,
              "minecraft:stacked_by_data": false,
              "minecraft:glint": false,
              "minecraft:should_despawn": true,
              "minecraft:liquid_clipped": false,
              "minecraft:allow_off_hand": false,
              "minecraft:fire_resistant": false
            }
          }
        };
        
        itemsFolder.file(itemFileName, JSON.stringify(blueprintItem, null, 2));
      });
      
      // Create structures folder and add the actual .mcstructure files
      const structuresFolder = bpFolder.folder("structures");
      
      // Add each uploaded .mcstructure file to the structures folder
      for (const structure of structures) {
        const arrayBuffer = await structure.file.arrayBuffer();
        const fileName = structure.fileName;
        structuresFolder.file(fileName, arrayBuffer);
      }
      
      // Create resource pack folder 
      const rpFolder = zip.folder(`${cleanPackName}_RP`);
      
      // Create resource pack manifest
      const resourceUuid = generateUUID();
      const resourceDataUuid = generateUUID();
      
      const rpManifest = {
        format_version: 2,
        header: {
          description: `${packName} - Resource Pack for Jerry's Colonies`,
          name: `${packName} RP`,
          uuid: resourceUuid,
          version: [1, 0, 0],
          min_engine_version: [1, 20, 10]
        },
        modules: [
          {
            description: `${packName} Resources`,
            type: "resources",
            uuid: resourceDataUuid,
            version: [1, 0, 0]
          }
        ]
      };
      
      rpFolder.file("manifest.json", JSON.stringify(rpManifest, null, 2));
      
      // Add pack icon for resource pack (use provided asset)
      const rpIconData = await fetchAssetAsBase64('assets/pack_icon.png');
      rpFolder.file("pack_icon.png", rpIconData, {base64: true});
      
      // Create textures folder structure and item_texture.json
      const texturesFolder = rpFolder.folder("textures");
      const itemsTexturesFolder = texturesFolder.folder("items");
      
      // Add the custom blueprint texture (use provided asset)
      const customBlueprintTexture = await fetchAssetAsBase64('assets/customblueprint.png');
      itemsTexturesFolder.file("customblueprint.png", customBlueprintTexture, {base64: true});
      
      const textureDefinitions = {};
      structures.forEach(structure => {
        const structureFileName = structure.fileName.replace('.mcstructure', '');
        const blueprintId = `blueprint_${structureFileName.toLowerCase().replace(/[^a-z0-9_]/g, '_')}`;
        
        textureDefinitions[blueprintId] = {
          textures: "textures/items/customblueprint"
        };
      });
      
      const itemTextureJson = {
        texture_data: textureDefinitions,
        resource_pack_name: `${cleanPackName}_rp`,
        texture_name: "atlas.items"
      };
      
      texturesFolder.file("item_texture.json", JSON.stringify(itemTextureJson, null, 2));
      
      // Add README for resource pack
      rpFolder.file("README.txt", `This resource pack contains texture definitions for ${packName}.\n\nThe textures reference "customblueprint" which should already exist in your main Jerry's Colonies resource pack.\n\nIf you want to use custom textures, replace the "customblueprint" references with your own texture paths.`);
      
      // Generate and return the .mcaddon file
      return await zip.generateAsync({type:"blob"});
    }

    function displayIncludedFiles(structures) {
      const includedFiles = document.getElementById('includedFiles');
      if (!includedFiles) return;
      
      includedFiles.innerHTML = `
        <div style="margin-bottom: 10px;"><strong>üìÅ Behavior Pack:</strong></div>
        ${structures.map(structure => `
          <div class="structure-file-item">
            ‚úÖ ${structure.fileName} (${structure.displayName})
          </div>
        `).join('')}
        <div style="margin: 10px 0;"><strong>üé® Resource Pack:</strong></div>
        <div class="structure-file-item">‚úÖ Custom blueprint textures</div>
        <div class="structure-file-item">‚úÖ Pack icons</div>
        <div class="structure-file-item">‚úÖ Item texture definitions</div>
      `;
    }
  </script>
</body>
</html>